<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Purchase Items</title>
    <link rel="stylesheet" href="styles purchase.css">
    <!-- Include PayPal SDK script -->
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=EUR"></script>
</head>
<body>
    <nav>
        <div class="nav-container">
            <img src="picture.png" alt="HydroWave Logo" class="image">
            <div class="hamburger" onclick="toggleMenu()">&#9776;</div>
            <ul class="nav-list">
                <li><a href="index.html" class="nav-link">Home Page</a></li>
                <li><a href="grup.html" class="nav-link">About the Group</a></li>
                <li><a href="projects.html" class="nav-link">Projects</a></li>
                <li><a href="about.html" class="nav-link">About the Game</a></li>
                <li><a href="purchase.html" class="nav-link">Purchases</a></li>
            </ul>
        </div>
    </nav>

    <div class="content">
        <h1 class="centered-text">Purchase Items</h1>
        <section class="product-list">
            <div class="product" data-name="Full Game - Navium" data-price="19.99" data-description="Get the complete game experience with all features included." data-images="item1-1.jpg,item1-2.jpg">
                <img src="item1.jpg" alt="Full Game - Navium" class="product-image">
                <h2>Full Game - Navium</h2>
                <p>€19.99</p>
                <button class="details-button" onclick="openModal(this)">View Details</button>
            </div>
            <div class="product" data-name="Cards" data-price="9.99" data-description="Have your cards been damaged or lost? Order a new card pack." data-images="item2-1.jpg,item2-2.jpg">
                <img src="item2.jpg" alt="Cards" class="product-image">
                <h2>Cards</h2>
                <p>€9.99</p>
                <button class="details-button" onclick="openModal(this)">View Details</button>
            </div>
        </section>
    </div>

    <!-- Modal for Item Details -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <div class="image-gallery">
                <span class="arrow left-arrow">&#10094;</span>
                <img id="modal-image" src="" alt="Product Image" />
                <span class="arrow right-arrow">&#10095;</span>
            </div>
            <div class="dot-container"></div>
            <h2 id="modal-title">Item Name</h2>
            <p id="modal-description">Item description goes here.</p>
            <p id="modal-price">Price: €0.00</p>
            <!-- PayPal Button container -->
            <div id="paypal-button-container"></div>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <img src="picture.png" alt="HydroWave Logo" class="footer-logo">
            <div class="footer-text">
                <h2>Contacts</h2>
                <h3>Email:</h3>
                <p>Game questions: <a href="mailto:hydrowave.support@gmail.com">hydrowave.support@gmail.com</a></p>
                <p>Project questions: <a href="mailto:hydrowave.projects@gmail.com">hydrowave.projects@gmail.com</a></p>
            </div>
        </div>
    </footer>

    <script>
        function toggleMenu() {
            const navList = document.querySelector('.nav-list');
            navList.classList.toggle('active');
        }

        let selectedItem = null;

        function openModal(button) {
            const product = button.closest('.product');
            selectedItem = {
                name: product.getAttribute('data-name'),
                price: product.getAttribute('data-price')
            };

            document.getElementById('modal-title').textContent = selectedItem.name;
            document.getElementById('modal-price').textContent = `Price: €${selectedItem.price}`;
            document.getElementById('modal').style.display = 'block';

            // Load the PayPal button
            loadPayPalButton(selectedItem.price);
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }

        function loadPayPalButton(price) {
            document.getElementById('paypal-button-container').innerHTML = ''; // Clear any existing button

            paypal.Buttons({
                createOrder: (data, actions) => {
                    return actions.order.create({
                        purchase_units: [{
                            amount: {
                                value: price
                            }
                        }]
                    });
                },
                onApprove: (data, actions) => {
                    return actions.order.capture().then((details) => {
                        alert(`Transaction completed by ${details.payer.name.given_name}!`);
                        closeModal();
                    });
                }
            }).render('#paypal-button-container');
        }
    </script>
</body>
</html>
